### **分布式的死锁检测Chandy-Misra-Haas算法的思想**

允许进程一次请求多个资源，而不是一次一个。

- 通过允许多个请求同时进行是的事物的增长阶段加速
- 这使得一个进程可以同时等待两个或多个进程

当某个进程等待资源时，例如P0等待P1将调用Chandy-Misra-Haas算法。

- 生成一个探测消息并发送给占用资源的进程

- - 消息由三个数字构成：阻塞的进程，发送消息的进程，接受消息的进程。
  - 由P0到P1的初始消息包含三元组（0，0，1）.

- 消息到达后，接受者检查以确认他自己是否也在等待其他进程。

- - 若是，就更新消息，字段1保持不变，字段2改成当前进程号，字段3改为等待的进程号。
  - 然后消息接着被发送到等待的进程。
  - 若存在多个等待进程，就要发送多个不同的消息。

- 不论资源在本地还是在远程，该算法一直继续下去。

- 若消息转了一圈后又回到最初的发送者，即字段1所列的进程，就说明存在一个有死锁的环路存在。